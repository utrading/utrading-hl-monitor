# 日志配置示例
# 将此配置添加到你的 cfg.toml 文件中

# ========== 开发环境配置 ==========
[log]
level = "debug"                   # 日志级别: debug, info, warn, error, fatal
filepath = "logs/dev.log"         # 日志文件路径
max_size = 10                     # 单个日志文件最大大小（MB）
max_backups = 5                   # 保留的旧日志文件数量
max_age = 3                       # 保留旧日志文件的天数
compress = false                  # 是否压缩旧日志文件
console = true                    # 是否同时输出到控制台

# ========== 生产环境配置 ==========
# [log]
# level = "info"                  # 生产环境使用 info 级别
# filepath = "logs/trading.log"   # 生产环境日志文件
# max_size = 100                  # 100MB 每个文件
# max_backups = 60                # 保留 60 个备份文件
# max_age = 15                    # 保留 15 天
# compress = true                 # 压缩旧日志节省空间
# console = false                 # 生产环境不输出到控制台

# ========== 预发布环境配置 ==========
# [log]
# level = "debug"                 # 预发布环境使用 debug 级别
# filepath = "logs/staging.log"
# max_size = 50
# max_backups = 30
# max_age = 7
# compress = true
# console = false

# ========== 测试环境配置 ==========
# [log]
# level = "debug"
# filepath = "logs/test.log"
# max_size = 10
# max_backups = 3
# max_age = 1
# compress = false
# console = true

# ========== 配置说明 ==========
#
# level: 日志级别
#   - debug: 调试信息，最详细
#   - info:  一般信息，推荐生产环境使用
#   - warn:  警告信息
#   - error: 错误信息
#   - fatal: 致命错误（会导致程序退出）
#
# filepath: 日志文件路径
#   - 相对路径：相对于程序运行目录
#   - 绝对路径：如 /var/log/trading/trading.log
#   - 目录会自动创建
#
# max_size: 单个日志文件最大大小（MB）
#   - 超过此大小会自动轮转
#   - 推荐值：开发环境 10-50，生产环境 50-200
#
# max_backups: 保留的旧日志文件数量
#   - 0 表示保留所有文件
#   - 推荐值：开发环境 5-10，生产环境 30-60
#
# max_age: 保留旧日志文件的天数
#   - 0 表示不根据时间删除
#   - 推荐值：开发环境 3-7，生产环境 7-30
#   - 注意：max_backups 和 max_age 同时生效，满足任一条件就会删除
#
# compress: 是否压缩旧日志文件
#   - true:  使用 gzip 压缩，节省磁盘空间
#   - false: 不压缩，便于直接查看
#   - 推荐：生产环境开启，开发环境关闭
#
# console: 是否同时输出到控制台
#   - true:  同时输出到文件和控制台
#   - false: 只输出到文件
#   - 推荐：开发环境开启，生产环境关闭

# ========== 日志轮转说明 ==========
#
# 系统支持两种轮转方式：
#
# 1. 按大小轮转
#    当日志文件达到 max_size 时自动轮转
#    轮转后的文件名格式：trading.log.1, trading.log.2, ...
#
# 2. 按日期轮转
#    每天 00:00 自动轮转
#    轮转后的文件名格式：trading-2024-01-01.log
#
# 两种方式可以同时生效

# ========== 磁盘空间估算 ==========
#
# 假设配置：
#   max_size = 100 MB
#   max_backups = 30
#   compress = true (压缩率约 90%)
#
# 最大磁盘占用：
#   当前文件: 100 MB
#   备份文件: 30 * 100 MB * 10% = 300 MB
#   总计: 约 400 MB
#
# 建议预留 2-3 倍空间以应对突发情况

# ========== 多文件模式配置 ==========
# 多文件模式将不同等级的日志写入不同文件，便于分类管理和分析
#
# 使用方式：
#   1. 将 filepath 设置为空字符串 ""
#   2. 设置 level_files 字段，指定各等级日志的文件路径
#
# 示例配置：
# [log]
# level = "info"
# filepath = ""  # 留空启用多文件模式
# level_files = { error = "logs/error.log", info = "logs/info.log", warn = "logs/warn.log", debug = "logs/debug.log" }
# max_size = 100
# max_backups = 60
# max_age = 15
# compress = true
# console = false
#
# 支持的日志等级：
#   - debug: 调试日志
#   - info:  信息日志
#   - warn:  警告日志
#   - error: 错误日志
#   - fatal: 致命错误日志
#
# 注意事项：
#   - level_files 中指定的等级会单独输出到对应文件
#   - 未指定的等级会向上合并到更高等级的文件（如未配置 debug，则 debug 日志会写入 info 文件）
#   - 每个日志文件独立轮转，互不影响
#   - 确保有足够的磁盘空间存储所有日志文件
#
# 磁盘空间估算（多文件模式）：
#   假设配置：
#     error: max_size=100, max_backups=30
#     info:  max_size=100, max_backups=30
#     warn:  max_size=100, max_backups=30
#     debug: max_size=100, max_backups=30
#     compress=true (压缩率约 90%)
#
#   最大磁盘占用：
#     4 个文件 × 100 MB × (1 + 30 × 10%) = 约 1.3 GB
#
# 多文件模式优势：
#   - 便于按等级快速定位问题
#   - 可以对不同等级日志设置不同的保留策略（需修改代码）
#   - 便于日志分析工具按等级处理
#   - ERROR 日志独立存储，便于监控告警

# ========== 性能影响 ==========
#
# zerolog 是高性能日志库，对系统性能影响很小：
#   - 每条日志约 150-300 纳秒
#   - 几乎零内存分配
#   - 异步写入，不阻塞业务逻辑
#
# 但仍需注意：
#   - 避免在热点路径记录过多日志
#   - 生产环境使用 info 级别，避免 debug
#   - 合理使用条件日志

# ========== 监控和告警 ==========
#
# 建议监控以下指标：
#   - 日志文件大小
#   - 日志写入速率
#   - 磁盘空间使用率
#   - ERROR 级别日志数量
#
# 可以使用 ELK、Loki 等日志分析工具

